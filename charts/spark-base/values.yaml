global:
  imagePullSecrets: []

s3:
  accessKey: "minioadmin"
  secretKey: "minioadmin"
  endpoint: ""
  existingSecret: ""  # Set to use existing secret instead of creating one

serviceAccount:
  create: true
  name: "spark"
  annotations: {}

rbac:
  create: true
  serviceAccountName: "spark"

# Core infrastructure (core.*) - used when spark-base is subchart of spark-3.5/spark-4.1.
# Parent charts pass core via spark-base.core to avoid duplication.
core:
  postgresql:
    enabled: false
    fullnameOverride: ""
    image:
      repository: postgres
      tag: "15-alpine"
      pullPolicy: IfNotPresent
    auth:
      username: "spark"
      password: "spark123"
    service:
      port: 5432
    persistence:
      enabled: true
      size: "8Gi"
      storageClass: ""
    databases: []
    resources:
      requests:
        memory: "256Mi"
        cpu: "100m"
      limits:
        memory: "512Mi"
        cpu: "500m"
  hiveMetastore:
    enabled: false
    fullnameOverride: ""
    image:
      repository: spark-k8s/hive
      tag: "4.0.0-pg"
      pullPolicy: IfNotPresent
    service:
      port: 9083
    warehouseDir: "s3a://warehouse/spark"
    database:
      name: "metastore"
    postgresql:
      host: ""
      port: 5432
      database: "metastore"
      username: "hive"
      password: "hive123"
    resources:
      requests:
        memory: "512Mi"
        cpu: "200m"
      limits:
        memory: "2Gi"
        cpu: "1000m"

minio:
  enabled: false
  image:
    repository: quay.io/minio/minio
    tag: "RELEASE.2024-01-01T16-36-33Z"
    pullPolicy: IfNotPresent
  service:
    port: 9000
    consolePort: 9001
  resources:
    requests:
      memory: "256Mi"
      cpu: "100m"
    limits:
      memory: "1Gi"
      cpu: "500m"
  persistence:
    enabled: true
    size: "10Gi"
    storageClass: ""
  buckets:
    - warehouse
    - spark-logs
    - spark-standalone-logs
    - spark-jobs
    - raw-data
    - processed-data
    - checkpoints

postgresql:
  enabled: false
  image:
    repository: postgres
    tag: "15-alpine"
    pullPolicy: IfNotPresent
  auth:
    username: "spark"
    password: "spark123"
  service:
    port: 5432
  persistence:
    enabled: true
    size: "8Gi"
    storageClass: ""
  databases: []
  resources:
    requests:
      memory: "256Mi"
      cpu: "100m"
    limits:
      memory: "512Mi"
      cpu: "500m"

security:
  # Pod Security Standards enforcement (changed to true in v1.0 for OpenShift compatibility)
  # Set to false in scenario presets for backward compatibility with dev environments
  podSecurityStandards: true
  runAsUser: 185
  runAsGroup: 185
  fsGroup: 185
  # PSS profile for namespace labels (restricted/baseline/privileged)
  pssProfile: restricted
  # Create namespace with PSS labels
  createNamespace: false

backup:
  enabled: false
  components: {}
