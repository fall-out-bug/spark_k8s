# Shared Infrastructure Preset for Spark 4.1
#
# This preset deploys ONLY Hive Metastore for Spark 4.1,
# assuming MinIO, PostgreSQL, and History Server are already deployed.
#
# Usage:
#   helm upgrade --install spark-41 charts/spark-4.1 -f charts/spark-4.1/presets/shared-infrastructure.yaml

# Disable top-level components (except Hive Metastore)
minio:
  enabled: false

postgresql:
  enabled: false

historyServer:
  enabled: false

connect:
  enabled: false

jupyter:
  enabled: false

airflow:
  enabled: false

# Enable only Hive Metastore
hiveMetastore:
  enabled: true
  fullnameOverride: "hive-metastore-41"
  # PostgreSQL connection to shared PostgreSQL
  postgresql:
    host: "postgresql-spark-infra"
    port: 5432
    database: "metastore_spark41"
    username: "hive"
    password: "hive123"

# S3 configuration (points to shared MinIO)
global:
  s3:
    enabled: true
    endpoint: "http://minio-spark-infra:9000"
    pathStyleAccess: true
    sslEnabled: false
    accessKey: "minioadmin"
    secretKey: "minioadmin"
    existingSecret: "s3-credentials"

# Feature flags
features:
  iceberg:
    enabled: false
  gpu:
    enabled: false
