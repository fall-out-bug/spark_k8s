# "Prod-like" profile for Minikube/k3s:
# - S3 stays the primary storage (warehouse/event logs/artifacts) via MinIO for tests
# - Spark master HA is enabled via PVC-backed recovery directory
# - PSS hardening is enabled for Spark/Airflow/MLflow/Metastore; embedded Postgres stays relaxed

security:
  podSecurityStandards: true
  # Common OpenShift-ish UID/GID (tune for your cluster)
  runAsUser: 1000
  runAsGroup: 1000
  fsGroup: 1000
  postgresql:
    # In real prod you likely use an external DB; for local "prod-like" tests keep embedded DB relaxed.
    relaxed: true

sparkMaster:
  ha:
    enabled: true
    recoveryDir: "/opt/spark/recovery"
    persistence:
      enabled: true
      size: 1Gi
      storageClass: ""

minio:
  enabled: true
  persistence:
    enabled: true
    size: 20Gi
    storageClass: ""

hiveMetastore:
  # Keep Spark warehouse on S3
  warehouseDir: "s3a://warehouse/standalone"

airflow:
  enabled: true

mlflow:
  enabled: true

