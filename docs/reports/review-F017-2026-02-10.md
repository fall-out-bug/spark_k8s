# Review Report: F017 — Spark Connect Go Client

**Feature:** F17 - Spark Connect Go Client  
**Review Date:** 2026-02-10  
**Reviewer:** Claude Code (@review skill)  
**Verdict:** ❌ **CHANGES_REQUESTED** (spec/design gaps before implementation)

---

## Executive Summary

F17 is **100% backlog** — no implementation exists. Review focuses on spec quality, design readiness, and prerequisites for implementation.

| Aspect | Status | Notes |
|--------|--------|-------|
| Implementation | None | No `tests/go/`, no `*.go` files |
| WS docs | Draft | 00-017-01..04 contain code templates |
| Beads | OK | spark_k8s-cqy + 4 WS tasks |
| Dependencies | Blocked | F11 (Docker Final Images) in backlog |

---

## Deliverables Verification

| Expected | Exists |
|----------|--------|
| `tests/go/client/` | ❌ No |
| `tests/go/smoke/` | ❌ No |
| `tests/go/e2e/` | ❌ No |
| `tests/go/load/` | ❌ No |
| `docs/go-client/` | ❌ No |
| `go.mod` | ❌ No |
| Any `*.go` file | ❌ No |

**Conclusion:** Feature not started.

---

## Spec & Design Gaps (Nedodelki)

### 1. Apache Spark Connect Go Client Reference — 404

**File:** `docs/drafts/feature-spark-connect-go.md:275`  
**Issue:** Link `https://github.com/apache/spark/blob/master/connect/client/go/README.md` returns 404.

**Impact:** Unclear whether official Spark Connect Go client exists or whether we need to build from gRPC protobuf.

**Action:** Verify current Spark Connect Go/Proto source before WS-017-01.

---

### 2. Wrong/Placeholder Import Paths in WS Docs

**Files:** `docs/workstreams/backlog/00-017-*.md`

| File | Import | Issue |
|------|--------|-------|
| 00-017-01.md | `connect "github.com/apache/spark/connect/go/v1/client"` | Package path may not exist |
| 00-017-02/03/04.md | `spark "github.com/org/spark-k8s/tests/go/client"` | Placeholder org; repo structure undefined |

**Action:** Define real module path (e.g. `github.com/<org>/spark-k8s/spark-connect-go`) and wire WS docs to it.

---

### 3. API Mismatches in 00-017-01 Code Template

**File:** `docs/workstreams/backlog/00-017-01.md`

- `CreateServerSideSession` vs feature spec `CreateSession`
- `connect.Plan_Relation` vs `connect.Plan_Sql` — structure may differ from actual Spark Connect proto
- `Row.values` type: `*connect.Expression_Literal` vs `[]interface{}`

**Action:** Align WS-017-01 template with actual Spark Connect gRPC/proto before coding.

---

### 4. Missing Go Module Skeleton

No `go.mod` or minimal `tests/go/` layout exists. WS-017-01 assumes `tests/go/client/` but there is no scaffolding.

**Action:** Add `tests/go/go.mod` and dirs before WS-017-01.

---

### 5. Dependency F11 (Docker Final Images) in Backlog

**INDEX.md:** WS-017-01 depends on F06, F11.  
**Beads:** spark_k8s-1cb depends on spark_k8s-cqy (blocks).

F11 (Docker Final Images) is backlog. Go client needs a running Spark Connect server for tests.

**Action:** Clarify: use existing runtime images (e.g. docker/runtime/) or wait for F11; document in feature spec.

---

### 6. CI Integration for Go Tests

No `.github/workflows` or Makefile targets for `go test`. Feature spec mentions `go test` but no CI.

**Action:** Add Go test step to CI (after WS-017-02).

---

## Post-Review Actions (Beads)

Tasks created in beads for the above gaps — see below.

---

## Verdict

**CHANGES_REQUESTED** — Design and spec must be updated before implementation.

**Report ID:** review-F017-2026-02-10
