---
ws_id: 00-008-05
feature: F08
status: backlog
size: MEDIUM
project_id: 00
github_issue: null
assignee: null
depends_on:
  - 00-001-07  # MLflow template
---

## WS-00-008-05: MLflow scenarios (24)

### üéØ Goal

**What must WORK after completing this WS:**
- 24 smoke test scenarios for MLflow integration
- Coverage for all modes (k8s, connect, standalone)
- Coverage for all versions (3.5.7, 3.5.8, 4.1.0, 4.1.1)

**Acceptance Criteria:**
- [ ] AC1: All 24 scenario scripts created
- [ ] AC2: MLflow server starts successfully
- [ ] AC3: MLflow projects can run with Spark backend
- [ ] AC4: MLflow tracking captures Spark run parameters
- [ ] AC5: All scenarios pass sequentially

**‚ö†Ô∏è WS is NOT complete until Goal is achieved (all AC ‚úÖ).**

---

### Context

MLflow template (WS-001-07) exists but lacks smoke test coverage. This WS creates comprehensive tests for MLflow+Spark integration.

### Dependencies

- WS-001-07: MLflow template

### Input Files

- charts/spark-standalone/templates/mlflow.yaml

### Steps

1. **Create MLflow+k8s scenarios** (4 versions)
2. **Create MLflow+connect-k8s scenarios** (4 versions)
3. **Create MLflow+connect-standalone scenarios** (4 versions)
4. **Create MLflow+standalone-submit scenarios** (4 versions)
5. **Create MLflow+GPU scenarios** (4 versions)
6. **Create MLflow+Iceberg scenarios** (4 versions)

### Code

```bash
validate_mlflow_tracking() {
    local mlflow_pod="$1"
    local ns="$2"

    # Run sample MLflow project
    kubectl exec -n "$ns" "$mlflow_pod" -- bash -c '
        cd /tmp
        mlflow run https://github.com/mlflow/mlflow-example.git \
            -P alpha=0.5 \
            -P l1_ratio=0.5 \
            --backend spark \
            --verbose
    '

    # Verify run tracked
    kubectl exec -n "$ns" "$mlflow_pod" -- mlflow runs list | grep -q "FINISHED"
}
```

### Scope Estimate

- Files: 24
- Lines: ~800 (MEDIUM)
- Tokens: ~6000

### Constraints

- DO NOT test MLflow experiments (focus on execution only)
- DO NOT test MLflow models (focus on Spark integration)

---

## Execution Report

**Executed by:** ______
**Date:** ______
**Duration:** ______ minutes

### Goal Status
- [ ] AC1-AC5 ‚Äî ‚úÖ

**Goal Achieved:** ______

### Files Changed
| File | Action | LOC |
|------|--------|-----|
|      |        |     |

### Statistics
- **Files Changed:** ______
- **Lines Added:** ______
- **Lines Removed:** ______
- **Test Coverage:** ______ %
- **Tests Passed:** ______
- **Tests Failed:** ______

### Deviations from Plan
- ______

### Commit
______
