---
ws_id: 025-10
feature: F25
status: backlog
size: MEDIUM
project_id: 00
github_issue: null
assignee: null
depends_on: ["025-09"]
---

## WS-025-10: Minikube Integration Tests (helm install + validate)

### üéØ Goal

**What must WORK after completing this WS:**
- –í—Å–µ 4 –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏—è —É—Å–ø–µ—à–Ω–æ –¥–µ–ø–ª–æ—è—Ç—Å—è –≤ minikube –¥–ª—è Spark 3.5.7
- Spark Connect –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ gRPC –∑–∞–ø—Ä–æ—Å—ã
- spark-submit pi.py –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ Connect
- Executor pods —Å–æ–∑–¥–∞—é—Ç—Å—è –≤ k8s mode
- Standalone master/workers —Å—Ç–∞—Ä—Ç—É—é—Ç –∏ –ø—Ä–∏–Ω–∏–º–∞—é—Ç –∑–∞–¥–∞—á–∏

**Acceptance Criteria:**
- [ ] AC1: `helm install` –ø—Ä–æ—Ö–æ–¥–∏—Ç –¥–ª—è jupyter-connect-k8s-3.5.7 ‚Üí –≤—Å–µ pods Running
- [ ] AC2: `helm install` –ø—Ä–æ—Ö–æ–¥–∏—Ç –¥–ª—è jupyter-connect-standalone-3.5.7 ‚Üí –≤—Å–µ pods Running
- [ ] AC3: `helm install` –ø—Ä–æ—Ö–æ–¥–∏—Ç –¥–ª—è airflow-connect-k8s-3.5.7 ‚Üí –≤—Å–µ pods Running
- [ ] AC4: `helm install` –ø—Ä–æ—Ö–æ–¥–∏—Ç –¥–ª—è airflow-connect-standalone-3.5.7 ‚Üí –≤—Å–µ pods Running
- [ ] AC5: Spark Connect gRPC –ø–æ—Ä—Ç 15002 –¥–æ—Å—Ç—É–ø–µ–Ω (tcpSocket probe)
- [ ] AC6: spark-submit pi.py —á–µ—Ä–µ–∑ Connect –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ (k8s mode)
- [ ] AC7: spark-submit pi.py —á–µ—Ä–µ–∑ Connect –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ (standalone mode)
- [ ] AC8: Jupyter pod –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ /api (HTTP 200)
- [ ] AC9: –í k8s mode executor pods —Å–æ–∑–¥–∞—é—Ç—Å—è –∏ –∑–∞–≤–µ—Ä—à–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] AC10: –í standalone mode workers –ø–æ–¥–∫–ª—é—á–µ–Ω—ã –∫ master (–ø—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ master UI)
- [ ] AC11: –ü–æ–≤—Ç–æ—Ä–∏—Ç—å –¥–ª—è 3.5.8 (smoke ‚Äî —Ö–æ—Ç—è –±—ã 1 —Å—Ü–µ–Ω–∞—Ä–∏–π)

**WS is NOT complete until Goal is achieved (all AC checked).**

### Test Matrix

| Scenario | Client | Backend | Infra | Key Checks |
|----------|--------|---------|-------|------------|
| jupyter-connect-k8s | Jupyter | k8s | MinIO | Connect gRPC, Jupyter API, executor pods |
| jupyter-connect-standalone | Jupyter | standalone | MinIO | Connect gRPC, Jupyter API, SA master/workers |
| airflow-connect-k8s | (headless) | k8s | - | Connect gRPC, spark-submit pi.py |
| airflow-connect-standalone | (headless) | standalone | - | Connect gRPC, spark-submit pi.py, SA master |

### Prerequisites

- minikube cluster running (`minikube start --cpus=4 --memory=8g`)
- Docker images built and loaded (`minikube image load spark-custom:3.5.7`)
- Helm 3.x installed

### Files Changed

- `scripts/tests/integration/test-spark-35-minikube.sh` (NEW)
- –í–æ–∑–º–æ–∂–Ω—ã hotfix-–ø—Ä–∞–≤–∫–∏ –≤ charts –µ—Å–ª–∏ —Ç–µ—Å—Ç—ã –≤—ã—è–≤—è—Ç –ø—Ä–æ–±–ª–µ–º—ã
