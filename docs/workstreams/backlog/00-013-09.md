---
ws_id: 00-013-09
feature: F13-improvements
status: backlog
size: MEDIUM
project_id: 00
github_issue: null
assignee: null
depends_on:
  - 00-013-07
  - 00-013-08
---

# WS-013-09: Argo Workflows Integration

## Description

Integrate Argo Workflows as the orchestration engine for load test execution.

## Goal

Orchestrate parallel execution of test matrix combinations using Argo Workflows with configurable parallelism, retry strategy, and artifact collection.

## Scope Files

- `scripts/argocd/argo-workflows/install.sh` (new)
- `scripts/tests/load/workflows/load-test-workflow.yaml` (new)
- `scripts/tests/load/orchestrator/submit-workflow.sh` (new)
- `scripts/tests/load/orchestrator/watch-workflow.sh` (new)
- `charts/argo-workflows/` (new)

## Acceptance Criteria

### AC1: Argo Workflows Installation
- Argo Workflows installed via Helm
- Controller deployment verified
- Argo CLI installed and configured
- Web UI accessible via port-forward
- RBAC configured for workflow submission

### AC2: Load Test Workflow Template
- Defines reusable workflow
- Parallel execution with configurable limit
- Resource synchronization mutex for Minikube protection
- Retry strategy with exponential backoff
- Artifact collection for logs and metrics

### AC3: Matrix Execution Workflow
- Iterates over test combinations
- Each test runs as separate workflow step
- Test isolation: dedicated namespace per test
- Cleanup handler removes namespace

### AC4: Workflow Submission Script
- Submits workflow to Argo
- Accepts tier parameter
- Returns workflow ID for tracking

### AC5: Workflow Monitoring
- Monitors workflow execution
- Real-time status updates
- Streams logs from active test pods
- Calculates progress

### AC6: Metrics Collection Integration
- Collects metrics from History Server
- Aggregates metrics across all workflow steps
- Detects regressions
- Produces HTML report

### AC7: Dashboard Integration
- Grafana dashboard for monitoring
- Filter by tier, spark version, orchestrator, mode
