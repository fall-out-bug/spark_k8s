---
ws_id: 030-01
feature: F30
status: backlog
size: MEDIUM
project_id: 00
github_issue: null
assignee: null
depends_on: []
---

## WS-030-01: OpenLineage Integration Preset

### Goal

**What must WORK after completing this WS:**
- OpenLineage Spark listener configured as optional integration
- Lineage events emitted to Marquez or compatible backend
- Preset values file for enabling lineage tracking

**Acceptance Criteria:**
- [ ] AC1: `charts/spark-4.1/values.yaml` includes `features.openLineage` section (enabled, endpoint, namespace, job)
- [ ] AC2: `charts/spark-4.1/templates/spark-connect-configmap.yaml` conditionally adds OpenLineage Spark listener config
- [ ] AC3: `charts/spark-4.1/presets/openlineage-values.yaml` preset created
- [ ] AC4: Same for spark-3.5
- [ ] AC5: `docker/spark-4.1/deps/requirements.txt` includes `openlineage-python` (optional)
- [ ] AC6: JAR dependency `openlineage-spark` added to pom.xml (optional via profile)
- [ ] AC7: `docs/recipes/integration/openlineage-setup.md` created (Marquez deploy + config)
- [ ] AC8: `helm template` with openLineage.enabled=true renders correct Spark conf

### Files Changed

- `charts/spark-4.1/values.yaml` (ADD features.openLineage section)
- `charts/spark-4.1/templates/spark-connect-configmap.yaml` (ADD OpenLineage conditional)
- `charts/spark-4.1/presets/openlineage-values.yaml` (NEW)
- `charts/spark-3.5/values.yaml` (ADD features.openLineage section)
- `docs/recipes/integration/openlineage-setup.md` (NEW)
