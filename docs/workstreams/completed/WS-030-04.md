---
ws_id: 030-04
feature: F30
status: backlog
size: MEDIUM
project_id: 00
github_issue: null
assignee: null
depends_on: ["030-01"]
---

## WS-030-04: Integrate Observability Stack as Chart Dependency

### Goal

**What must WORK after completing this WS:**
- `charts/observability/` charts integrated as optional dependency in spark-4.1 and spark-3.5
- Single `helm install` with `--set observability.enabled=true` deploys full monitoring stack
- Preset for "batteries-included" deployment

**Acceptance Criteria:**
- [ ] AC1: `charts/spark-4.1/Chart.yaml` adds optional dependency on observability charts (prometheus, grafana, loki)
- [ ] AC2: `charts/spark-4.1/values.yaml` adds `observability:` section (enabled: false by default)
- [ ] AC3: `charts/spark-4.1/presets/observability-values.yaml` enables full stack
- [ ] AC4: `helm install spark charts/spark-4.1 -f charts/spark-4.1/presets/observability-values.yaml` deploys Spark + Prometheus + Grafana + Loki
- [ ] AC5: Grafana auto-configured with Prometheus and Loki datasources
- [ ] AC6: Same integration for spark-3.5
- [ ] AC7: Documentation updated: `docs/recipes/observability/one-click-setup.md`

### Files Changed

- `charts/spark-4.1/Chart.yaml` (ADD observability dependencies)
- `charts/spark-4.1/values.yaml` (ADD observability section)
- `charts/spark-4.1/presets/observability-values.yaml` (NEW)
- `charts/spark-3.5/Chart.yaml` (ADD observability dependencies)
- `docs/recipes/observability/one-click-setup.md` (NEW)
