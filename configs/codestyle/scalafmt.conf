# Scalafmt Configuration
# Scala code formatter

version = "3.7.17"

# Maximum line length
maxColumn = 100

# Alignment
align.preset = more    # Alignment style: none|some|more|most
align.multiline = true

# Indentation
indent.main = 2
indent.callSite = 2
indent.ctorSite = 2
indent.extendSite = 2
indent.defnSite = 2
indent.caseSite = 2
indent.withSiteRelativeToExtends = 2
indent.compositePatternSite = 2

# Newlines
newlines.source = unfold                    # keep|unfold
newlines.source.ignoreInDirectiveMatchers  # Don't unfold in these directives
newlines.topLevelStatementBlankLines = 1   # Blank lines before top-level statements
newlines.beforeCurlyLambdaParams           # multiline or squash
newlines.afterCurlyLambdaParams            # squash
newlines.implicitParamListModifierForce     # [after, before]
newlines.avoidForResultEmpty               # false
newlines.inInterpolation                  # allow
newlines.inInterpolation                  = "allow"
newlines.ignoreInParentheses               # true
newlines.afterKeywordOnParenthesizedLambda = true

# Spaces
spaces.afterKeywordBeforeParen = true
spaces.afterKeywordBeforeParen = [true]
spaces.afterKeywordBeforeParen.if = false
spaces.afterKeywordBeforeParen.while = false
spaces.afterKeywordBeforeParen.for = false
spaces.beforeContextBoundColon             # [after, before]
spaces.inParentheses                      # true
spaces.inByNameContrary                  # false

# Imports
import.ordering                           # Groups: *, ascii, lowercase
import.groups = [[["re", "scala", "org"], ["com", "javax"], ["io", "java"]]]
import.optIn.configStyle                 # false

# Comments
comments.wrap = slc                    # trailing|slc|aslc
comments.wrapStandaloneSlcAs = single   # single|double

# Dangling parentheses
danglingParentheses.preset = true       # defnSite, callSite, control, after(...)
danglingParentheses.callSite = true
danglingParentheses.defnSite = true
danglingParentheses.ctrlSite = true
danglingParentheses.exclude = []         # Exclude from dangling
danglingParentheses.implicitParamListModifierForce = [after, before]

# Rewrite rules
rewrite.rules = [
  AsciiSortImports,          # Sort imports in ASCII order
  AvoidInfix,                # Rewrite infix to dot notation
  RedundantBraces,           # Remove redundant braces
  RedundantParens,           # Remove redundant parentheses
  SortModifiers,             # Sort class/trait modifiers
  PreferCurlyFors,          # Use curly braces for multi-line fors
]
rewrite.scala3.convertToNewSyntax = true
rewrite.scala3.newSyntax.enabled = true
rewrite.scala3.removeOptionalBraces.enabled = false

# Docstrings
docstrings.style = keep          # keep|SpaceAsterisk|AsteriskSpace
docstrings.blankFirstLine = keep # keep|blank
docstrings.wrap = no             # yes|no|unfold
docstrings.oneline = unfold      # unfold|keep|unfold

# XML
xmlLiterals.assumeFormatted = true
xmlLiterals.lineLength = 80

# Operator inclusion
includeCurlyBraceInSelectChains = false
includeNoParensInSelectChains = true

# Platform style
project.git = true               # Use .gitignore for excludes
project.layout = StandardConvention

# Vertical spacing
verticalMultiline.atDefnSite = true
verticalMultiline.arityThreshold = 10
verticalMultiline.excludeArkImplicit = true

# For readers
runner.forcedTrailingNewline.enabled = true
runner.forcedTrailingNewline.inFileName = [".scala", ".sbt"]
runner.forcedTrailingNewline.stringValue = "unix"

# SBT runner
runner.dialect = scala3
runner.optimizer.forceConfigStyleMinArgs = 1
