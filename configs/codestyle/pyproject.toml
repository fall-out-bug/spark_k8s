[tool.black]
# Black (Python formatter) configuration

# Maximum line length
line-length = 127

# Target Python versions
target-version = ['py38', 'py39', 'py310', 'py311']

# Include files
include = '\.pyi?$'

# Exclude directories
extend-exclude = '''
/(
    \.git
  | \.venv
  | venv
  | build
  | dist
  | .*\.egg-info
)/
'''

# Use double quotes
skip-string-normalization = false

[tool.isort]
# isort (import sorting) configuration

# Black compatible profile
profile = "black"

# Line length (should match black)
line_length = 127

# Multi-line output mode
multi_line_output = 3

# Force grid style for from imports
force_grid_wrap = 0

# Use trailing commas
use_parentheses = true

# Ensure all imports are on top of file
ensure_newline_before_comments = true

[tool.pylint.main]
# Pylint configuration

# Use multiple processes
jobs = 0

# Python version to use
py-version = "3.11"

# Ignore patterns
ignore = [
    ".git",
    "__pycache__",
    ".venv",
    "venv",
    "build",
    "dist",
    "*.egg-info",
]

[tool.pylint.messages_control]
# Disable specific warnings
disable = [
    "C0111",  # missing-docstring
    "C0103",  # invalid-name
    "R0903",  # too-few-public-methods
    "R0913",  # too-many-arguments
    "W0212",  # protected-access
]

# Enable specific warnings
enable = [
    "useless-suppression",
]

[tool.pylint.format]
# Maximum line length
max-line-length = 127

# String quotes
string-quote = "double"

[tool.pylint.basic]
# Good variable names
good-names = [
    "i", "j", "k", "ex", "id", "_",
    "db", "df", "rdd", "spark",
]

[tool.mypy]
# MyPy (type checker) configuration

# Python version
python_version = "3.11"

# Warn about missing type annotations
warn_return_any = true
warn_unused_configs = true
disallow_untyped_defs = false  # Gradually enable

# Show error codes
show_error_codes = true

# Show error context
show_column_numbers = true
show_error_context = true

# Follow imports
follow_imports = "normal"

[tool.pytest.ini_options]
# Pytest configuration

# Minimum version
minversion = "7.0"

# Test discovery
testpaths = ["tests"]

# Python files
python_files = ["test_*.py", "*_test.py"]

# Python classes
python_classes = ["Test*"]

# Python functions
python_functions = ["test_*"]

# Coverage configuration
addopts = """
    --cov=.
    --cov-report=term-missing
    --cov-report=html
    --cov-report=xml
    --strict-markers
    --tb=short
"""

# Markers
markers = [
    "slow: marks tests as slow",
    "integration: marks tests as integration tests",
    "unit: marks tests as unit tests",
]

[tool.coverage.run]
# Coverage configuration

# Source code directory
source = ["."]

# Branch coverage
branch = true

# Omit from coverage
omit = [
    "*/tests/*",
    "*/test_*.py",
    "*/__pycache__/*",
    "*/site-packages/*",
]

[tool.coverage.report]
# Coverage report configuration

# Precision
precision = 2

# Show missing lines
show_missing = true

# Skip covered files
skip_covered = false

# Exclude lines
exclude_lines = [
    "pragma: no cover",
    "def __repr__",
    "raise AssertionError",
    "raise NotImplementedError",
    "if __name__ == .__main__.:",
    "if TYPE_CHECKING:",
    "class .*\\bProtocol\\):",
    "@(abc\\.)?abstractmethod",
]

[tool.bandit]
# Bandit (security linter) configuration

# Exclude directories
exclude_dirs = [
    "/tests",
]

# Tests
tests = ["B201", "B301", "B401", "B501", "B601", "B701"]

# Skips
skips = ["B101", "B601"]
